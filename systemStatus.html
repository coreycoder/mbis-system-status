<link rel="import"  href="https://polygit2.appspot.com/components/polymer/polymer.html">
<link href="../css/font-awesome.min.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="../js/jquery.easypiechart.js"></script>
<link rel="import" href="statusNode.html"/>
<link rel="import" href="statusPath.html"/>
<link type="text/css" rel="stylesheet" href="../css/jquery-ui.css" />
<script src="../js/jquery-ui.js"></script>

<dom-module id="mt-system-status">
    <template>
        <style>
            .first {
                left: 400px;
                top: 400px;
                position: absolute;
            }

            .second {
                left: 80px;
                top: 750px;
                position: absolute;
            }

            .third {
                left: 700px;
                top: 150px;
                position: absolute;
            }

            .fourth {
                left: 700px;
                top: 600px;
                position: absolute;
            }

            .fifth {
                left: 80px;
                top: 400px;
                position: absolute;
            }

            .sixth {
                left: 80px;
                top: 120px;
                position: absolute;
            }

            .ui-widget-content {
                border: 1px solid #dddddd;
                background: none;
                color: #73879C;
            }

            #one, #two, #three, #four, #five {
                position: absolute;
                top: 0;
                left: 0;
            }
        </style>
        <mt-status-path id="one" mt-d="M150, 850 L470, 500"></mt-status-path>
        <mt-status-path id="two" mt-d="M770, 250 L470, 500"></mt-status-path>
        <mt-status-path id="three" mt-d="M770, 700 L470, 500"></mt-status-path>
        <mt-status-path id="four" mt-d="M150, 500 L470, 500"></mt-status-path>
        <mt-status-path id="five" mt-d="M150, 220 L470, 500"></mt-status-path>

        <mt-status-node id="temptest" class="first ui-widget-content" mt-name="WAS" mt-image="fa fa-cloud fa-5x" mt-color="green"></mt-status-node>
        <mt-status-node id="temptest2" class="second ui-widget-content" mt-name="ADS" mt-image="fa fa-database fa-5x" mt-color="red"></mt-status-node>
        <mt-status-node id="temptest" class="third ui-widget-content" mt-name="DES" mt-image="fa fa-exchange fa-5x" mt-color="green"></mt-status-node>
        <mt-status-node id="temptest" class="fourth ui-widget-content" mt-name="WS" mt-image="fa fa-windows fa-5x" mt-color="green"></mt-status-node>
        <mt-status-node id="temptest" class="fifth ui-widget-content" mt-name="FES" mt-image="fa fa-eye fa-5x" mt-color="green"></mt-status-node>
        <mt-status-node id="temptest" class="sixth ui-widget-content" mt-name="MBSS" mt-image="fa fa-search fa-5x" mt-color="green"></mt-status-node>
    </template>

    <script type="text/javascript">

        Polymer({
            is: "mt-system-status",
            properties: {
                mtName: {
                    type: String,
                    notify: true
                },
                mtImage: {
                    type: String,
                    notify: true
                }
            },
            ready: function () {

                $( ".first" ).draggable(
                        {
                            drag: function() {
                                var offset = $(this).offset();
                                var xPos = editWidth(offset.left);
                                var yPos = editHeight(offset.top);
                                //$("mt-button.sixth").find("span").text('x: ' + xPos + '  y: ' + yPos);
                                var top1 = $(".second").css("top");
                                top1 =  parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                var left1 = $(".second").css("left");
                                left1 =  parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#one").attr("mt-d", temp);

                                top1 = $(".third").css("top");
                                top1 =  parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                left1 = $(".third").css("left");
                                left1 =  parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#two").attr("mt-d", temp);

                                top1 = $(".fourth").css("top");
                                top1 =  parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                left1 = $(".fourth").css("left");
                                left1 =  parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#three").attr("mt-d", temp);

                                top1 = $(".fifth").css("top");
                                top1 =  parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                left1 = $(".fifth").css("left");
                                left1 =  parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#four").attr("mt-d", temp);

                                top1 = $(".sixth").css("top");
                                top1 =  parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                left1 = $(".sixth").css("left");
                                left1 =  parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#five").attr("mt-d", temp);

                            }
                        });

                $( ".second" ).draggable(
                        {
                            drag: function() {
                                var offset = $(this).offset();
                                var xPos = editWidth(offset.left);
                                var yPos = editHeight(offset.top);
                                //$("mt-button.sixth").find("span").text('x: ' + xPos + '  y: ' + yPos);
                                var top1 = $(".first").css("top");
                                top1 = parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                var left1 = $(".first").css("left");
                                left1 = parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#one").attr("mt-d", temp);
                            }
                        });

                $( ".third" ).draggable(
                        {
                            drag: function() {
                                var offset = $(this).offset();
                                var xPos = editWidth(offset.left);
                                var yPos = editHeight(offset.top);
                                //$("mt-button.sixth").find("span").text('x: ' + xPos + '  y: ' + yPos);
                                var top1 = $(".first").css("top");
                                top1 = parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                var left1 = $(".first").css("left");
                                left1 = parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#two").attr("mt-d", temp);
                            }
                        });

                $( ".fourth" ).draggable(
                        {
                            drag: function() {
                                var offset = $(this).offset();
                                var xPos = editWidth(offset.left);
                                var yPos = editHeight(offset.top);
                                //$("mt-button.sixth").find("span").text('x: ' + xPos + '  y: ' + yPos);
                                var top1 = $(".first").css("top");
                                top1 = parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                var left1 = $(".first").css("left");
                                left1 = parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#three").attr("mt-d", temp);
                            }
                        });
                $( ".fifth" ).draggable(
                        {
                            drag: function() {
                                var offset = $(this).offset();
                                var xPos = editWidth(offset.left);
                                var yPos = editHeight(offset.top);
                                //$("mt-button.sixth").find("span").text('x: ' + xPos + '  y: ' + yPos);
                                var top1 = $(".first").css("top");
                                top1 = parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                var left1 = $(".first").css("left");
                                left1 = parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#four").attr("mt-d", temp);
                            }
                        });
                $( ".sixth" ).draggable(
                        {
                            drag: function() {
                                var offset = $(this).offset();
                                var xPos = editWidth(offset.left);
                                var yPos = editHeight(offset.top);
                                //$("mt-button.sixth").find("span").text('x: ' + xPos + '  y: ' + yPos);
                                var top1 = $(".first").css("top");
                                top1 = parseInt(top1.substring(0, top1.length - 2));
                                top1 = editHeight(top1);
                                var left1 = $(".first").css("left");
                                left1 = parseInt(left1.substring(0, left1.length - 2));
                                left1 = editWidth(left1);
                                var temp = "M" + left1 + ", " + top1 + " L" + xPos + ", " + yPos;
                                $("#five").attr("mt-d", temp);
                            }
                        });

                function editWidth(wid) {
                    return wid + 70;
                }

                function editHeight(hei) {
                    return hei + 100;
                }

                setTimeout(function() {
                    //$("body").trigger("pathTrigger");
                    console.log("This should have triggered already");

                    /*
                    $("#temptest").find(".contains").css("box-shadow", "0px 1px 10px 5px green");
                    $("#temptest2").find(".contains").css("box-shadow", "0px 1px 10px 5px green");
                    $("#temptest").find(".circle").css("background", "green");
                    $("#temptest2").find(".circle").css("background", "green");
                    $("#temptest").find(".circle").css("box-shadow", "0 0 2px 2px green");
                    $("#temptest2").find(".circle").css("box-shadow", "0 0 2px 2px green");
                    */

                }, 300);

                var hahaha = $(this.$.temptest2);
                console.log(hahaha.attr("mt-color"));
            }
        });
    </script>
</dom-module>

